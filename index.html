<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TradingView Advanced Chart (for Notion)</title>
  <style>
    html, body, #tv { height: 100%; margin: 0; }
  </style>
</head>
<body>
  <div id="tv"></div>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script>
    // Read query parameters with defaults
    const params = new URLSearchParams(location.search);
    const symbol   = params.get('symbol')   || 'FX:EURUSD';
    const interval = params.get('interval') || 'D';           // 1, 5, 15, 60, D, W
    const theme    = params.get('theme')    || 'dark';        // dark | light
    const studies  = (params.get('studies') || 'Volume@tv-basicstudies')
                      .split(',').filter(Boolean);
    const watchlist= (params.get('watchlist') || 'FX:EURUSD,BINANCE:BTCUSDT')
                      .split(',').filter(Boolean);
    new TradingView.widget({
      container_id: "tv",
      autosize: true,
      symbol: symbol,
      interval: interval,
      timezone: "Etc/UTC",
      theme: theme,
      style: "1",
      locale: "en",
      allow_symbol_change: true,
      hide_side_toolbar: false,
      withdateranges: true,
      studies: studies,
      watchlist: watchlist,
      details: true,
      calendar: true
    });
  </script>
</body>
</html>